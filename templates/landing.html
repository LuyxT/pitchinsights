<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PitchInsights – Teammanagement für Fußballvereine</title>
    <meta name="description"
        content="Die zentrale Plattform für Kader, Kalender, Kommunikation und Taktik. Entwickelt für ambitionierte Fußballvereine.">
    <link rel="icon" type="image/png" href="/static/images/favicon.png">

    <style>
        :root {
            --bg: #0b0e14;
            --ink: #f5f7ff;
            --muted: rgba(245, 247, 255, 0.7);
            --glass: rgba(12, 16, 26, 0.55);
            --glass-line: rgba(255, 255, 255, 0.08);
            --accent: #6cf2a4;
            --accent-2: #3f8cff;
        }

        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: auto;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg);
            color: var(--ink);
            min-height: 100vh;
            overflow-x: hidden;
        }

        canvas {
            position: fixed;
            inset: 0;
            width: 100vw;
            height: 100vh;
            display: block;
            background: #000;
        }

        .scroll-area {
            position: relative;
            width: 100%;
            height: 100vh;
        }

        .overlay-layer {
            position: fixed;
            inset: 0;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 0 6vw;
            z-index: 2;
        }

        .overlay-stack {
            display: flex;
            flex-direction: column;
            gap: 18px;
            width: min(320px, 80vw);
        }

        .overlay-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 18px;
            background: var(--glass);
            border: 1px solid var(--glass-line);
            border-radius: 16px;
            opacity: 0;
            transform: translateY(24px);
            transition: opacity 200ms ease, transform 200ms ease;
            box-shadow: 0 18px 40px rgba(4, 7, 14, 0.35);
        }

        .overlay-item strong {
            font-size: 15px;
            font-weight: 600;
        }

        .overlay-item span {
            font-size: 13px;
            color: var(--muted);
        }

        .icon {
            width: 36px;
            height: 36px;
            border-radius: 12px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .icon svg {
            width: 20px;
            height: 20px;
            stroke: var(--ink);
            stroke-width: 1.5;
            fill: none;
        }

        .cta-overlay {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            pointer-events: none;
            opacity: 0;
            transition: opacity 250ms ease;
        }

        .cta-card {
            padding: 28px 36px;
            border-radius: 18px;
            background: rgba(10, 12, 20, 0.78);
            border: 1px solid rgba(255, 255, 255, 0.12);
            text-align: center;
            box-shadow: 0 30px 80px rgba(6, 10, 20, 0.5);
        }

        .cta-card h2 {
            font-size: 26px;
            margin-bottom: 10px;
        }

        .cta-card p {
            color: var(--muted);
            margin-bottom: 16px;
            font-size: 15px;
        }

        .cta-pill {
            display: inline-block;
            padding: 10px 16px;
            border-radius: 999px;
            background: linear-gradient(120deg, var(--accent-2), var(--accent));
            color: #0b0e14;
            font-weight: 600;
            font-size: 14px;
        }

        .loading {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.65);
            color: var(--muted);
            font-size: 14px;
            z-index: 4;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }

        @media (max-width: 800px) {
            .overlay-layer {
                justify-content: center;
                padding: 0 8vw;
            }

            .overlay-stack {
                width: 100%;
            }

            .overlay-item {
                padding: 14px 16px;
            }
        }
    </style>
</head>

<body>
    <canvas id="frame-canvas"></canvas>

    <div class="overlay-layer" aria-hidden="true">
        <div class="overlay-stack" id="overlayStack">
            <div class="overlay-item" data-start="0.58" data-end="0.68">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <rect x="4" y="5" width="16" height="15" rx="2"></rect>
                        <line x1="8" y1="3" x2="8" y2="7"></line>
                        <line x1="16" y1="3" x2="16" y2="7"></line>
                        <line x1="4" y1="10" x2="20" y2="10"></line>
                    </svg>
                </div>
                <div>
                    <strong>Kalender</strong>
                    <span>Trainings, Spiele, Termine</span>
                </div>
            </div>
            <div class="overlay-item" data-start="0.64" data-end="0.74">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <circle cx="8" cy="8" r="3"></circle>
                        <circle cx="16" cy="8" r="3"></circle>
                        <path d="M3 20c1.5-3 4-4 7-4"></path>
                        <path d="M14 16c3 0 5.5 1 7 4"></path>
                    </svg>
                </div>
                <div>
                    <strong>Kader</strong>
                    <span>Profile, Positionen, Status</span>
                </div>
            </div>
            <div class="overlay-item" data-start="0.7" data-end="0.8">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <rect x="3" y="6" width="18" height="12" rx="2"></rect>
                        <path d="M7 10h4"></path>
                        <path d="M7 14h8"></path>
                    </svg>
                </div>
                <div>
                    <strong>Taktiktafel</strong>
                    <span>Systeme, Aufstellungen</span>
                </div>
            </div>
            <div class="overlay-item" data-start="0.76" data-end="0.86">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <rect x="4" y="6" width="16" height="12" rx="2"></rect>
                        <polygon points="10,9 15,12 10,15"></polygon>
                    </svg>
                </div>
                <div>
                    <strong>Videoanalyse</strong>
                    <span>Szenen markieren, teilen</span>
                </div>
            </div>
            <div class="overlay-item" data-start="0.82" data-end="0.92">
                <div class="icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M4 6h12"></path>
                        <path d="M4 12h16"></path>
                        <path d="M4 18h10"></path>
                    </svg>
                </div>
                <div>
                    <strong>Kommunikation</strong>
                    <span>Trainer, Team, Eltern</span>
                </div>
            </div>
        </div>
    </div>

    <div class="cta-overlay" id="ctaOverlay" aria-hidden="true">
        <div class="cta-card">
            <h2>Bereit für PitchInsights?</h2>
            <p>Bring Struktur in deinen Alltag als Trainer.</p>
            <div class="cta-pill">Jetzt starten</div>
        </div>
    </div>

    <div class="loading" id="loading">Lade Frames…</div>

    <div class="scroll-area" id="scrollArea"></div>

    <script>
        const canvas = document.getElementById('frame-canvas');
        const ctx = canvas.getContext('2d');
        const scrollArea = document.getElementById('scrollArea');
        const loading = document.getElementById('loading');
        const ctaOverlay = document.getElementById('ctaOverlay');
        const overlayItems = Array.from(document.querySelectorAll('.overlay-item'));

        const frameCount = 119;
        const frames = new Array(frameCount);
        let loadedCount = 0;
        let currentFrame = 0;
        let targetFrame = 0;
        let ticking = false;

        const framePath = (index) => {
            const padded = String(index).padStart(3, '0');
            return `/frames/ezgif-frame-${padded}.jpg`;
        };

        const setCanvasSize = () => {
            const { innerWidth, innerHeight, devicePixelRatio } = window;
            canvas.width = innerWidth * devicePixelRatio;
            canvas.height = innerHeight * devicePixelRatio;
            canvas.style.width = `${innerWidth}px`;
            canvas.style.height = `${innerHeight}px`;
        };

        const drawFrame = (index) => {
            const img = frames[index];
            if (!img || !img.complete) {
                return;
            }

            const dpr = window.devicePixelRatio || 1;
            ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const canvasWidth = canvas.width / dpr;
            const canvasHeight = canvas.height / dpr;
            const scale = Math.min(canvasWidth / img.naturalWidth, canvasHeight / img.naturalHeight);
            const drawWidth = img.naturalWidth * scale;
            const drawHeight = img.naturalHeight * scale;
            const offsetX = (canvasWidth - drawWidth) / 2;
            const offsetY = (canvasHeight - drawHeight) / 2;

            ctx.drawImage(img, offsetX, offsetY, drawWidth, drawHeight);
        };

        const updateOverlays = (progress) => {
            overlayItems.forEach((item) => {
                const start = parseFloat(item.dataset.start || '0');
                const end = parseFloat(item.dataset.end || '1');
                const t = Math.min(Math.max((progress - start) / (end - start), 0), 1);
                const active = progress >= start && progress <= end;
                const y = 30 - t * 140;
                item.style.opacity = active ? '1' : '0';
                item.style.transform = `translateY(${active ? y : 24}px)`;
            });

            if (progress >= 0.98) {
                ctaOverlay.style.opacity = '1';
            } else {
                ctaOverlay.style.opacity = '0';
            }
        };

        const updateFrameFromScroll = () => {
            const maxScroll = scrollArea.offsetHeight - window.innerHeight;
            const scrollY = Math.min(Math.max(window.scrollY, 0), maxScroll);
            const progress = maxScroll > 0 ? scrollY / maxScroll : 0;
            targetFrame = Math.round(progress * (frameCount - 1));

            updateOverlays(progress);
            if (!ticking) {
                ticking = true;
                requestAnimationFrame(() => {
                    if (currentFrame !== targetFrame) {
                        currentFrame = targetFrame;
                        drawFrame(currentFrame);
                    }
                    ticking = false;
                });
            }
        };

        const preloadFrames = () => {
            for (let i = 0; i < frameCount; i += 1) {
                const img = new Image();
                img.src = framePath(i + 1);
                img.onload = () => {
                    loadedCount += 1;
                    if (loadedCount === 1) {
                        loading.style.display = 'none';
                        drawFrame(0);
                    }
                };
                frames[i] = img;
            }
        };

        const initScrollArea = () => {
            scrollArea.style.height = `${frameCount * 6}vh`;
        };

        window.addEventListener('resize', () => {
            setCanvasSize();
            drawFrame(currentFrame);
            updateFrameFromScroll();
        });

        window.addEventListener('scroll', updateFrameFromScroll, { passive: true });

        setCanvasSize();
        initScrollArea();
        preloadFrames();
        updateFrameFromScroll();
    </script>
</body>

</html>
